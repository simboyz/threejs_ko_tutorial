<!DOCTYPE html>
<!--[if IE 9]>
	<html xmlns="http://www.w3.org/1999/xhtml" class="ie9"  dir="ltr" lang="ko">
<![endif]-->
<!--[if IE 8]>
	<html xmlns="http://www.w3.org/1999/xhtml" class="ie8"  dir="ltr" lang="ko">
<![endif]-->
<!--[if IE 7]>
	<html xmlns="http://www.w3.org/1999/xhtml" class="ie7"  dir="ltr" lang="ko">
<![endif]-->
<!--[if IE 6]>
	<html xmlns="http://www.w3.org/1999/xhtml" class="ie6"  dir="ltr" lang="ko">
<![endif]-->
<html dir="ltr" lang="ko">
	<head>
		<meta charset="utf-8" />
		<title>Three.js 앱 개발하기</title>
		<!--[if IE]>
			<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<link rel="stylesheet" href="css/style.css"/>
		<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js "></script>
		
	</head>
	<body>
		<div id="container">
			
			<header>
				<h1>Three.js 앱 개발하기</h1>
				<p>By 심 한섭 <a href="http://twitter.com/simboyz">@simboyz</a></p>
				<p>중요 레퍼런스 <a href="http://threejsdoc.appspot.com/doc/index.html">THREE DOC</a></p>
				
			</header>
			<section id="index_list">
				<h2>목차</h2>
				<ul>
					<li><a href="#Features">특징</a></li>
					<li><a href="#Warm_up">워밍업</a></li>
					<li><a href="#Draw_line">선 그리기</a></li>
					<li><a href="#Shader">쉐이더 이해하기</a></li>
					<li><a href="#Load_obj">모델링 불러서 쓰기</a></li>
				</ul>
			</section>
			<article id="Features">
				<h2>주요특징</h2>
				<p>Three.js 에는 다음과 같은 특징들이 있습니다.</p>
				<ul>
					<li>
						렌더러(Renderer) : canvas, svg, WebGL / 효과들(effects) ; 입체효과(anaglyph), 사시효과(crosseyed), 스테레오타입(stereo) 등등 이상
					</li>
					<li>
						장면(Scenes) : 런타임(실행시간) 동안 객체를 추가하거나 제거 ; 안개효과(fog)
					</li>
					<li>
						카메라(Scenes) : 원근법 카메라(perspective)와 직각투영 카메라(orthographic) ; 컨트롤러(controller), 트랙볼(trackball), 1인칭 슈팅게임(FPS), 경로 등등(path and more)
					</li>
					<li>
						애니메이션(Animation) : 모핑(morph : 이미지를 자연스럽게 바꾸기), 키프레임(keyframe)
					</li>
					<li>
						빛(Lights) : 잔진한 빛(ambient), 방향성 빛(direction), 포인트 빛(point), 스팟라이트(spot lights : 환한조명) ; 그림자(shadows) : 주고 받기(cast and receive)
					</li>
					<li>
						재료(Materials) : 
						람베르트(<a href="http://krdic.naver.com/detail.nhn?docid=11557800" target="_blank">Lambert</a>), 
						펑세이딩(<a href="http://terms.naver.com/entry.nhn?docId=350366&mobile&categoryId=341" target="_blank">phong</a>),
						이외에도 더 다양하다. 모든 재료는 질감과 세이딩 효과가 적용됩니다.					
					</li>
					<li>
						쉐이더(Shader) : WebGL 에서 접근 가능한 모든 것이 적용되어 있습니다; 렌즈 플레어, ---<i>추가 작업 필요</i>
					</li>
					<li>
						객체(Objects) : 그물코(meshes), 입자(particles), 스프라이트(sprite), 선(lines), 리본(ribbons), 뼈대(bones) 등등이 세부 사항까지 정의 되어 있습니다.
					</li>
					<li>
						기하구조(Geometry) : 평면(plane), 입방체(cube), 구(sphere), 원형 융기(torus), 3D 텍스트 등등이 있습니다. ---<i>추가 작업 필요</i>
					</li>
					<li>
						로더(Loader) : 바이너리(binary), 이미지(image), JSON 그리고 장면
					</li>
					<li>
						유틸리티(Utilities) : 3D 수식 함수들 거의 대부분을 포함하였습니다. frustrum, Quaternian, matrix, UVs 등을 포함해서 말입니다.
					</li>
					<li>
						Export / Import : Three.js 에서 사용가능한 JSON 을 만들어 주는 도구들 : 가능한 파일 포맷 - Blender, CTM, FBX, 3D Max, and OBJ
					</li>
					<li>
						지원(Support) : 아직 작업중인 API 문서. 작동에 대한 포럼과 위키의 내용들.
					</li>
					<li>
						예제(Examples) : 150 개가 넘는 예제들 수록
					</li>
				</ul>
			</article>
			<article id="Warm_up">
				<h2>워밍업</h2>
				<p>
					본격적인 설명 전에 Three.js 앱이 어떻게 화면을 구성하는지 간단하게 따라해 보겠습니다.
					이 강좌는 기본적으로 어느정도 javascript 에 숙달되었다는 것을 가정하고 작성되었으므로 내용을 보시다가 궁금증이 있으면 wiki 로 문의하시기 바랍니다.
					<br/><br/>
					기본적인 html 문서를 만들고 script 태그를 이용해서 최신 버전의 Three.js 를 문서에 첨부합니다. 
				</p>
				<p>
					3차원의 세계는 다음과 같은 요소들로 구성되어 있습니다.
					<ul>
						<li>현재 시간과 공간 정보를 모두 포함하는 장면 - scene</li>
						<li>그리고 그 장면을 찍고 있는 카메라 - camera</li>
						<li>그 안에서 움직이거나 정지한 대상물 - object (예제에서는 그 대상물을 그물코, 즉 mesh 로 사용)</li>
						<li>장면을 담아 표현해 내는 처리장치(시각 처리 장치)에 해당하는 렌더러 - renderer</li>	
					</ul>
					이 네 가지 정보가 최소한의 3D 을 구성하는 요소들 입니다. 이 요소들을 이용해서 기본적인 화면을 만들어 보겠습니다.
				</p>
				<code id="example1_1">				
				</code>
				<script type="text/javascript">
					$('#example1_1').load('docs/example1_1.txt');
				</script>
				<p>하지만 아직까지는 아무런 내용도 화면에 출력되지 않습니다. 클래스를 상속만 했지 클래스에 필요한 property 들을 정의하지 않았기 때문입니다. 이제 property 들을 정의해 보겠습니다.</p>
				<code id="example1_2">				
				</code>
				<script type="text/javascript">
					$('#example1_2').load('docs/example1_2.txt');
				</script>
				<p>카메라를 구성하면서 아용한 인자들은 각각, FOV(Field of View), Aspect, Near, Far 입니다. FOV 는 쉽게 말해서 최대 시야각이라고 생각하면 됩니다. Aspect는 카메라의 가로세로 비율이고, Near 와 Far 는 각각 최소 최대 초점거리 입니다. 또한 camera.position.z 값을 지정했는데, 이는 최대 거리(1000)을 기준으로 중간 크기 정도로 보이게 x, y, z 좌표상의 중간 값인 500 으로 정의한 것입니다.</p>
				<p>위에서는 객체를 구성하기 위해서 mesh 를 사용했습니다. mesh 를 만들기 위해서는 기하학적 구조(geometry) 와 질료(material)의 두가지가 필요합니다. 이 예제에서는 가로, 세로, 높이를 가진 CubGeometry 와, 이미지를 활용하여 질료(material) 을 구성했습니다.</p>
				<p>장면에 카메라와 객체를 배치합니다. scene 의 add 함수를 이용해서 간다하게 구성 할 수 있습니다.</p>
				<p>이렇게 모아진 대상물들을 실제로 출력하기 위해서 WebGLRenderer 를 이용하여 문서에 삽입합니다.
				</p>
				<p>animate 함수는 화면을 지속적으로 랜더링 하기 위해 작성되었습니다. WebGL 에서 화면은 고정되어 있는 것이 아니라 지속적으로 갱신이 되고 있는듯 합니다. 따라서 HTML5 의 게임그래픽용 함수인 RequestAnimationFrame 을 이용하여 화면을 갱신하고, 랜더링을 시켜 줍니다. 랜더링 과정에서 살짝 객체의 위치를 조절하면 애니메이션 효과를 줄 수 있습니다.				
				</p>
				<p class="to-center">
					<a href="examples/example1.html" target="_blank">
						<img src="img/example1.png" alt="example1"><br/>DEMO
					</a>
				</p>
			</article>
			<article id="Draw_line">
				<h2>선 그리기</h2>
				<p>
					기하 구조체를 이용하지 않고, 선이나 원을 그리고 싶다고 가정해 보겠습니다. 먼저, 장면(Scene), 랜더러(Renderer), 그리고 카메라(Camera)를 정의하고 다음과 같은 단계를 진행합니다.
				</p>
				<p>
					워밍업 단계에서 진행한 코드를 조금 수정하여 작성해 보도록 하겠습니다.
				</p>
				<code id="example2_1"></code>
				<script type="text/javascript">
					$('#example2_1').load('docs/example2_1.txt');
				</script>
				<p>
					<a href="examples/example2.html" target="_blank">
						DEMO
					</a>
				</p>
			</article>
			<article id="Shader">
				<h2>쉐이더 이해하기</h2>
				<p>3D 그래픽을 처음 접하는 사람이라면 일단 용어들 부터가 생소합니다. 저 역시 마찬가지 인데요. 그중에서도 쉐이더라는 용어가 특히 아리송했습니다. 비슷한 사례로 비유를 들어보도록 하겠습니다.</p>
				<p>포토샾의 필터같은 기능과 비슷합니다. 흔히 이야기하는 포샵질과 비슷하게 쉐이더를 적용하면 화면이 이뻐집니다. 거친 선들도 작성된 그물코들은 맨들맨들해 지고, 화면에 몽환적으로 만들수도 있습니다. 그래서 어떤 사람들은 눈속임 기술이라고도 이야기 합니다. 위키에서 정의한 내용을 보면 다음과 같이 나옵니다.
				<blockquote>
				컴퓨터 그래픽스 분야에서 셰이더(shader)는 소프트웨어 명령의 집합으로 주로 그래픽 하드웨어의 렌더링 효과를 계산하는 데 쓰인다. 셰이더는 그래픽 처리 장치(GPU)의 프로그래밍이 가능한 렌더링 파이프라인을 프로그래밍하는 데 쓰인다. Direct3D와 오픈지엘 그래픽 라이브러리는 다음과 같이 세 가지의 세이더를 사용한다. 버텍스 셰이더, 지오메트리 셰이더, 픽셀 셰이더
				</blockquote>
				위의 정의에서 보듯이 GPU를 사용하기 때문에 GPU 만 좋다면 빵빵하게 효과가 들어갑니다. 반대로 그래픽 카드가 나쁘면 CPU 가 아무리 빨라도 효과가 안 나옵니다.
				</p>
				<p>
				위키의 정의에 나와있는 용어 중에서 생소한 용어들인 버텍스 쉐이더, 지오메트리 쉐이더, 픽셀 쉐이더에 대해서 간단히 정리하겠습니다. 아래의 정의는 <a href="http://blog.naver.com/blue9954?Redirect=Log&logNo=50101651302">외부 블로그의 글</a>을 참고했습니다.
				</p>
				<ul>
					<li>버텍스 쉐이더 : 버텍스를 이용한 효과를 준다. 버텍스의 색, 위치 정보를 바꾸어 줌으로써 효과를 얻는다. 가장 쉬운 예로 버텍스 라이팅, 카툰 외각선 효과가 있다.</li>
					<li>지오메트리 쉐이더 : 폴리곤을 찌그러트리거나, 변형 또는 쪼개주는 쉐이더다. 대표적인 사용방법으로는 그림자, 테셀레이션 기법이 있다.</li>
					<li>픽셀 쉐이더 : 화면에 보이는 모든 픽셀을 각각 쉐이딩한다. 위의 두 개념과는 다르게 스크린에 보이는 '이미 랜더링 된' 이미지를 이용해 효과를 주는 방식으로 일명 포토샵의 '뽀샤시 효과'가 대표적이다.</li>
				</ul>
				<p>THREE 에는 두 개의 쉐이더가 있습니다. 버텍스 쉐이더(Vertex shaders)와 픽셀 쉐이더 입니다. 픽쉘 쉐이더는 다른 말로 프래그먼트 쉐이더(Fragment shaders)라고 합니다. THREE 에서는 프래그먼트 쉐이더라는 용어를 씁니다. 이 문서에서는 간략하게 넘어갑니다. 보다 자세한 내용을 알고 싶으시면 <a href="http://aerotwist.com/tutorials/an-introduction-to-shaders-part-1/">이 곳</a>을 참고하시면 됩니다.</p>
			</article>
			<article id="Load_obj">
				<h2>모델링 불러서 쓰기</h2>
				<p>WebGL 을 이용하면 화면에 어떤 것도 뿌릴 수 있지만, 코드로 복잡한 대상들을 작성하는 것은 한계가 있습니다. 보다 멋진 모델들은 전문 3D 디자이너들이 해 놓은 작업물을 불러와서 사용하는 것이 좋습니다.
				THREE 에는 대부분의 3D 툴들을 통해서 작성한 모델들을 JSON 형식으로 변환해 주는 툴이 있습니다.</p>
				<p>먼저 모델을 이용해서 작성된 데모를 보고 각각의 디자인 포맷들을 THREE 용 JSON 으로 변환하는 방법에 대해서 설명을 드리겠습니다.</p>
			</article>
			
		</div>
		<script type="text/javascript" src="js/main.js"></script>
	</body>
</html>